"use strict";const elementWrapper=document.querySelector("#wrapper"),elementForm=document.querySelector("#form"),elementInput=document.querySelector("#input-Search"),elementButton=document.querySelector("#button-Search"),mySeries=document.querySelector("#mySeries"),elementListFav=document.querySelector("#list-favorites"),urlBase="http://api.tvmaze.com/search/shows?q=";let showFavorite=[];function init(){const e=elementInput.value.toLowerCase();event.preventDefault(),fetch(urlBase+e).then(e=>e.json()).then(e=>{displaySeries(e)})}function selectedFavorites(e){e.currentTarget.classList.toggle("selected");const t=e.currentTarget.querySelector("h2"),n=e.currentTarget.querySelector("img"),r={name:t.innerHTML,image:n.src};showFavorite.push(r),addNewShow(r),localStorage.setItem("selected",JSON.stringify(showFavorite))}const displaySeries=e=>{for(let t=0;t<e.length;t++){const n=document.createElement("ul"),r=document.createElement("li"),o=document.createElement("h2"),a=document.createElement("img");let l=`${e[t].show.image}`;o.innerHTML=`${e[t].show.name}`,r.appendChild(o),r.appendChild(a),n.addEventListener("click",selectedFavorites),n.appendChild(r),elementWrapper.appendChild(n),a.src="null"===l?"https://via.placeholder.com/210x295/fabada/666666/?text=TV":`${e[t].show.image.medium}`}},getLocalStorage=()=>{const e=localStorage.getItem("selected");null!==e&&(showFavorite=JSON.parse(e)),paintListLastVisited(showFavorite),init()},paintListLastVisited=e=>{for(let t of e)addNewShow(t)},deleteLocal=()=>{localStorage.removeItem("selected"),elementListFav.innerHTML=""},addNewShow=e=>{const t=document.createElement("li");t.innerHTML+=`<h2>${e.name}</h2><img src=${e.image}>`;const n=document.createElement("button");n.innerHTML="X",n.addEventListener("click",deleteLocal),t.appendChild(n),elementListFav.appendChild(t)};function enterForm(e){e.preventDefault(),init()}elementForm.addEventListener("submit",enterForm),elementButton.addEventListener("click",init),window.addEventListener("load",getLocalStorage);